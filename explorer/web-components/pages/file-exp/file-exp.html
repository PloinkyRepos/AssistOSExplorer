<header>
    <h1>AssistOS Explorer</h1>
    <p>Browse workspace files powered by the official MCP File Server.</p>
</header>
<main>
    <section class="panel" id="directoryPanel">
        <div class="toolbar">
            <button id="upButton" class="secondary" title="Go to parent directory" data-local-action="goUp">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                     class="bi bi-arrow-up-short" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                          d="M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"/>
                </svg>
                Up
            </button>
            <button id="refreshButton" class="secondary" title="Reload directory" data-local-action="refresh">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                     class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                </svg>
                Refresh
            </button>
            <button id="newDirButton" title="Create a new directory" data-local-action="newDirectory">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                     class="bi bi-folder-plus" viewBox="0 0 16 16">
                    <path d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm.69-1.207A1 1 0 0 1 2.5 1h3.672a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.19 1.793z"/>
                    <path d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"/>
                </svg>
                New Folder
            </button>
            <button id="newFileButton" title="Create a new file" data-local-action="newFile">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                     class="bi bi-file-earmark-plus-fill" viewBox="0 0 16 16">
                    <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM8.5 7v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 1 0z"/>
                </svg>
                New File
            </button>
            <label>
                <input type="checkbox" id="hiddenToggle" data-local-action="toggleHiddenFiles"/> Show hidden files
            </label>
            <div class="path-info">
                <span>Path:</span>
                <div class="breadcrumbs" id="breadcrumbs"></div>
            </div>
        </div>
        <div class="workspace">
            <div class="panel list">
                <div class="list-header">
                    <span>Directory Contents</span>
                    <button id="toggleListButton" title="Toggle directory view">
                        <span class="arrow">-</span>
                        <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-folder-fill" viewBox="0 0 16 16">
  <path d="M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"/>
</svg></button>
                </div>
                <div class="entries">
                    <table>
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Size</th>
                            <th>Modified</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody id="entriesBody">$$entriesHTML</tbody>
                    </table>
                </div>
            </div>
            <div class="resizer" id="resizer"></div>
            <div class="panel preview">
                <div class="preview-header">
                    <span id="editorTitle">File Preview</span>
                    <div id="editorActions" class="hidden">
                        <button id="editButton" data-local-action="editFile">Edit</button>
                    </div>
                    <div id="editingActions" class="hidden">
                        <button id="saveButton" data-local-action="saveFile">Save</button>
                        <button id="cancelButton" data-local-action="cancelEdit" class="secondary">Cancel</button>
                    </div>
                </div>
                <div class="preview-body">
                    <div class="preview-content">
                        <pre id="filePreview"></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="status" id="statusBanner"></div>
</main>
